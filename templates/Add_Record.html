<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Record â€” SumeetSSG HR Portal</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gray-100 font-serif">

<nav class="bg-white shadow p-4 flex justify-between">
  <h1 class="text-2xl font-bold">SumeetSSG HR Portal</h1>
  <ul class="flex space-x-4">
    <li><a href="{{ url_for('workforce') }}">Workforce</a></li>
    <li><a href="{{ url_for('add_record') }}">Add Record</a></li>
    <li><a href="{{ url_for('search') }}">Search</a></li>
    <li><a href="{{ url_for('logout') }}">Logout</a></li>
  </ul>
</nav>

<div class="max-w-4xl mx-auto p-6 mt-6 bg-white rounded shadow">
  <h2 class="text-xl font-bold mb-4">Add New Applicant</h2>
  <form id="addRecordForm" enctype="multipart/form-data">
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label>Name <span class="text-red-600">*</span></label>
        <input type="text" name="name" required class="border p-2 rounded w-full">
      </div>
      <div>
        <label>Applied Position <span class="text-red-600">*</span></label>
        <input type="text" name="applied_position" required class="border p-2 rounded w-full">
      </div>
      <div>
        <label>Contact No1 <span class="text-red-600">*</span></label>
        <input type="text" name="contact_no1" maxlength="10" required class="border p-2 rounded w-full">
      </div>
      <div>
        <label>Contact No2</label>
        <input type="text" name="contact_no2" maxlength="10" class="border p-2 rounded w-full">
      </div>
      <div>
        <label>Status <span class="text-red-600">*</span></label>
        <select name="status" required class="border p-2 rounded w-full">
          <option value="">Select</option>
          <option>Final Select</option>
          <option>Join</option>
          <option>Yet To Join</option>
          <option>Offer Extended</option>
          <option>Counter Offer</option>
        </select>
      </div>
      <div>
        <label>Resume</label>
        <input type="file" name="resume_path" accept=".pdf,.doc,.docx" class="border p-2 rounded w-full">
      </div>
    </div>
    <button type="submit" class="mt-4 px-6 py-2 bg-blue-600 text-white rounded">Add Record</button>
  </form>
</div>

<script>
document.getElementById("addRecordForm").addEventListener("submit", function(e){
  e.preventDefault();
  const formData = new FormData(this);
  fetch("/add_record", { method:"POST", body:formData })
    .then(res=>res.json())
    .then(r=>{
      if(r.success){
        Swal.fire("Success", r.message, "success");
        this.reset();
      } else {
        Swal.fire("Error", r.message, "error");
      }
    }).catch(err=>Swal.fire("Error","Something went wrong","error"));
});
</script>
</body>
</html>
